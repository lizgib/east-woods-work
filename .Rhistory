original <- read.table('~/Documents/FS18/PLB400/Bioinformatics18/project/table2.tsv.NAimputed.txt')
original <- read.table('~/Documents/FS18/PLB400/Bioinformatics18/project/table2.tsv.NAimputed.txt', na.strings = 'NA')
original <- read.table('~/Documents/FS18/PLB400/Bioinformatics18/project/table2.tsv.NAimputed.txt', header = T, sep = '\t')
View(original)
genes <- read.table('~/Documents/FS18/PLB498/even_genes.tsv')
genes <- read.table('~/Documents/FS18/PLB498/even_genes.tsv', header = T, sep = '\t')
View(genes)
View(genes)
newdf <- original[which(original$gene %in% genes$X)]
newdf <- original[which(original$gene %in% genes$X),]
View(newdf)
match(genes$X, original)
match(genes$X, original$gene)
original <- original[order('gene'),]
View(original)
original <- original[order(gene),]
original <- read.table('~/Documents/FS18/PLB400/Bioinformatics18/project/table2.tsv.NAimputed.txt', header = T, sep = '\t')
temp <- original[order('gene'),]
View(temp)
which(original$gene %in% genes$X)
which(genes$X %in% original$gene)
match(genes$X, original$gene)
usethis <- cbind(original$gene, original$fitness, original[, 20:246])
View(usethis)
newdf <- usethis[which(genes$X %in% usethis$`original$gene`),]
newdf <- usethis[which(usethis$`original$gene` %in% genes$X),]
View(genes)
write.table(newdf, 'new_feature_table.tsv', sep = '\t')
newdf <- original[which(genes$X %in% usethis$`original$gene`),]
write.table(newdf, 'new_feature_table.txt', sep = '\t', quote = F)
View(original)
source('~/Documents/GitHub/east_woods_work/scripts/05.envt_data.R')
setwd('~/Documents/GitHub/east_woods_work/')
source('~/Documents/GitHub/east_woods_work/scripts/05.envt_data.R')
typeof(gibbons_data$inv_ratio07)
typeof(gibbons_data$inv_ratio18)
typeof(understory07$inv_ratio07)
typeof(understory18$inv_ratio18)
typeof(understory07$plot_cover)
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
tree.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Tree Layer")[3:6]
#-----------------------------------------------------------------------------------------------------------
#2018
path.2018 = '~/Documents/GitHub/east_woods_work/data/East_Woods/Inventory_2018/'
tree.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Tree Layer")[3:6]
print(head(tree.spring.18))
shrub.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Shrub Layer")[3:8]
shrub.spring.18$Category..Seedling.S...Sapling.U...Shrub.SH. <- NULL
shrub.spring.18$Sapling.Category...5cm.or...5cm <- NULL
names(tree.spring.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
View(shrub.spring.18)
names(shrub.spring.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
shrub.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Shrub Layer")[3:8]
View(shrub.spring.18)
shrub.spring.18$Category..Seedling.S...Sapling.U...Shrub.SH. <- NULL
shrub.spring.18$`Category: Seedling(S)/ Sapling(U)/ Shrub(SH)` <- NULL
shrub.spring.18$`Sapling Category:< 5cm or > 5cm` <- NULL
#-----------------------------------------------------------------------------------------------------------
# READ IN DATA
#-----------------------------------------------------------------------------------------------------------
# 2007
#path.2007  = '~/Documents/GitHub/east_woods_work/data/East_Woods/Inventory_2007/'
path.2007 = '~/Google Drive File Stream/My Drive/East Woods/Inventory 2007/'
herb.spring.07 <- read_excel(file.path(path.2007, "Spring Vegetation Sampling FINAL-Sp 07.CORRECTED PLOTS.xls"), sheet = "Ground Layer")[3:6]
View(herb.spring.07)
#-----------------------------------------------------------------------------------------------------------
# READ IN DATA
#-----------------------------------------------------------------------------------------------------------
# 2007
path.2007  = '~/Documents/GitHub/east_woods_work/data/East_Woods/Inventory_2007/'
herb.spring.07.2 <- read_excel(file.path(path.2007, "Spring Vegetation Sampling FINAL-Sp 07.CORRECTED PLOTS.xls"), sheet = "Ground Layer")[3:6]
View(herb.spring.07.2)
View(tree.spring.18)
write.csv(dat.all, '../dat.all.csv', row.names = F, quote = F)
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
#setwd('~/Documents/morton arb/east_woods_phylogeny/DATA/')
#git version
library(readxl)
setwd('~/Documents/GitHub/east_woods_work/')
#-----------------------------------------------------------------------------------------------------------
# READ IN DATA
#-----------------------------------------------------------------------------------------------------------
# 2007
path.2007  = '~/Documents/GitHub/east_woods_work/data/East_Woods/Inventory_2007/'
herb.spring.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Ground Layer")[3:6]
names(herb.spring.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
herb.sum.07 <- read_excel(file.path(path.2007, "Summer Vegetation Sampling-RevisedFinal_2_20.CORRECTED PLOTS.xls"), sheet = "Ground Layer")[3:6]
names(herb.sum.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
shrub.spring.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Shrub Layer")[3:8]
View(herb.spring.07)
#setwd('~/Documents/morton arb/east_woods_phylogeny/DATA/')
#git version
library(readxl)
setwd('~/Documents/GitHub/east_woods_work/')
#-----------------------------------------------------------------------------------------------------------
# READ IN DATA
#-----------------------------------------------------------------------------------------------------------
# 2007
path.2007  = '~/Documents/GitHub/east_woods_work/data/East_Woods/Inventory_2007/'
herb.spring.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Ground Layer")
View(herb.spring.07)
names(herb.spring.07) <- herb.spring.07[1,]
herb.spring.07[1,] <- NULL
herb.spring.07[1,] <- NULL
herb.spring.07 <- herb.spring.07[-1,]
herb.spring.07 <- herb.spring.07[,-c(2,5,6,7,8)]
herb.sum.07 <- read_excel(file.path(path.2007, "Summer Vegetation Sampling-RevisedFinal_2_20.CORRECTED PLOTS.xls"), sheet = "Ground Layer")
View(herb.sum.07)
names(herb.sum.07) <- herb.sum.07[1,]
head(herb.sum.07)
herb.sum.07 <- herb.sum.07[-1,]
head(herb.sum.07)
herb.sum.07 <- herb.sum.07[,-c(5,6,7,8)]
head(herb.sum.07)
names(shrub.spring.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
shrub.spring.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Shrub Layer", skip = 1)
names(herb.sum.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
View(shrub.spring.07)
tree.spring.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Tree Layer", skip = 1)
tree.spring.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Tree Plots", skip = 1)
View(tree.spring.07)
shrub.spring.07 <- shrub.spring.07[,-c(5,6,7)]
names(shrub.spring.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
names(tree.spring.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
tree.spring.07 <- tree.spring.07[,-c(5,6)]
#-----------------------------------------------------------------------------------------------------------
# 2018
# path.2018 = '/Volumes/GoogleDrive/My Drive/East Woods/Inventory_2018/'
path.2018 = '~/Documents/GitHub/east_woods_work/data/East_Woods/Inventory_2018/'
herb.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Herbaceous")
View(herb.spring.18)
herb.spring.18 <- herb.spring.18[,-c(1,2,7,8,9)]
names(herb.spring.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
herb.sum.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Summer Herb Data Sheet_AESedits_Oct-22.xlsx"), sheet = "Summer Herbaceous")[3:6]
View(herb.sum.18)
herb.sum.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Summer Herb Data Sheet_AESedits_Oct-22.xlsx"), sheet = "Summer Herbaceous")
herb.sum.18 <- herb.sum.18[,-c(1,2,7,8,9)]
names(herb.sum.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
shrub.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Shrub Layer")
View(shrub.spring.18)
shrub.spring.18 <- shrub.spring.18[,-c(1,2,6,7,9)]
names(shrub.spring.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
names(tree.spring.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
tree.spring.18 <- read_excel(file.path(path.2018, "18-0073 Morton 2018 Spring Veg Data_AES-edits_Oct-22.xlsx"), sheet = "Tree Layer")
View(tree.spring.07)
View(tree.spring.18)
tree.spring.18 <- tree.spring.18[,-c(1,2,7,8,9,10)]
names(tree.spring.18) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
herb.sum.07$sample_period <- 'SUM'
herb.spring.07$sample_period <- 'SPR'
names(herb.sum.07) <- names(herb.spring.07)
herb07 <- rbind(herb.spring.07, herb.sum.07)
View(herb.spring.07)
# herb cover = % of plot covered
names(herb.spring.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
herb.sum.07$sample_period <- 'SUM'
herb.spring.07$sample_period <- 'SPR'
names(herb.sum.07) <- names(herb.spring.07)
herb07 <- rbind(herb.spring.07, herb.sum.07)
herb07$datset <- 'H'
shrub.sum.07$sample_period <- 'SUM'
shrub.spring.07$sample_period <- 'SPR'
shrub.sum.07 <- read_excel(file.path(path.2007, "Summer Vegetation Sampling-RevisedFinal_2_20.CORRECTED PLOTS.xls"), sheet = "Shrub Layer", skip = 1)
View(shrub.sum.07)
shrub.sum.07 <- shrub.sum.07[,-c(5,6,7)]
# number of live stems = cover
names(shrub.sum.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
shrub.sum.07 <- read_excel(file.path(path.2007, "Summer Vegetation Sampling-RevisedFinal_2_20.CORRECTED PLOTS.xls"), sheet = "Shrub Layer", skip = 1)
shrub.sum.07 <- shrub.sum.07[,-c(5,6,7)]
names(shrub.sum.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
tree.sum.07 <- read_excel(file.path(path.2007, "Vegetation Sampling-Final_1_17_07.xls"), sheet = "Tree Plots", skip = 1)
tree.sum.07 <- tree.sum.07[,-c(5,6)]
names(tree.sum.07) <- c("PlotID", "Spp.Code", "Spp.Name", "Cover")
shrub.sum.07$sample_period <- 'SUM'
shrub.spring.07$sample_period <- 'SPR'
shrub.sum.07$datset <- 'S'
shrub.spring.07$datset <- 'S'
tree.sum.07$sample_period <- 'SUM'
tree.spring.07$sample_period <- 'SPR'
tree.sum.07$datset <- 'T'
tree.spring.07$datset <- 'T'
tree07 <- rbind(tree.spring.07, tree.sum.07)
dat.07 <- rbind(herb07, shrub07, tree07)
shrub07 <- rbind(shrub.sum.07, shrub.spring.07)
dat.07 <- rbind(herb07, shrub07, tree07)
herb.sum.18$sample_period <- 'SUM'
herb.spring.18$sample_period <- 'SPR'
herb18$datset <- 'H'
herb18 <- rbind(herb.sum.18, herb.spring.18)
herb18$datset <- 'H'
names(shrub.spring.18) <- names(dat.07[1:4])
shrub.spring.18$sample_period <- 'SPR'
shrub18 <- shrub.spring.18
shrub18$datset <- 'S'
tree.spring.18$sample_period <- 'SPR'
tree18 <- tree.spring.18
tree18$datset <- 'T'
dat.18 <- rbind(herb18, shrub18, dat.tree18)
dat.18 <- rbind(herb18, shrub18, tree18)
dat.07$species <- trimws(dat.07$species)
dat.07$Spp.Name <- trimws(dat.07$Spp.Name)
dat.18$Spp.Name <- trimws(dat.18$Spp.Name)
dat.07$PlotID <- gsub('-', '', dat.07$PlotID)
#just adding a column to make keeping track of the years easier
dat.07$year <- 2007
dat.18$year <- 2018
dat.all <- rbind(dat.18, dat.07)
plots_both_years <- intersect(dat.07$plot, dat.18$plot)
plots_both_years <- intersect(dat.07$PlotID, dat.18$PlotID)
dat.07 <- dat.07[which(dat.07$PlotID %in% plots_both_years),]
dat.18 <- dat.18[which(dat.18$PlotID %in% plots_both_years),]
dat.all <- dat.all[which(dat.all$PlotID %in% plots_both_years),]
write.csv(dat.all, '../dat.all.csv', row.names = F, quote = F)
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/00.combine_spp_pools.R')
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
dat.all$accepted_name <- tnrs_all$Accepted_name[match(dat.all$species, tnrs_all$Name_submitted)]
View(dat.all)
which(dat.all$plot == 2018)
which(dat.all$plot == '2018')
unique(dat.all$plot)
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
rm(list = ls())
source('~/Documents/GitHub/east_woods_work/scripts/02.compare_years.R')
source('~/Documents/GitHub/east_woods_work/scripts/02.compare_years.R')
source('~/Documents/GitHub/east_woods_work/scripts/03.natives.R')
source('~/Documents/GitHub/east_woods_work/scripts/03.natives.R')
View(dat.all)
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species/usda_spp_info.csv')
View(usda_spp_dat)
names(native_id) <- c('Accepted_name', 'native')
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
names(native_id) <- c('Accepted_name', 'native')
View(native_id)
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
View(native_id)
invasive_tnrs <- read.csv('data/species/invasives_tnrs.csv')
View(invasive_tnrs)
View(native_id)
View(native_id)
View(dat.all)
length(unique(dat.all$species[which(is.na(dat.all$nativestatus))]))
length(unique(dat.all$accepted_name[which(is.na(dat.all$nativestatus))]))
