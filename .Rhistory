accname = unique(sort(dat$accepted_name)))
vects$accname <- vects$accname[which(!vects$accname %in% c('', ' ', '0'))]
dat.mat <- matrix(0, length(vects$plots), length(vects$accname),
dimnames = list(vects$plots, vects$accname))
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
dim(dat.mat)
dim(dat)
dim(dat)
dim(dat)[1]
View(dat)
View(dat.mat)
dat[,'plot']
dat.mat[,'plot']
View(dat.mat)
dat.mat[1,'plot']
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
print(dat[i, 'plot'])
#dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
print(dat[i, 'accepted_name'])
#dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
View(dat)
table(dat)
table(dat$plot)
length(unique(dat$plot))
table(dat.all$plot)
table(dimnames(dat.mat)[1])
length(unique(dat.mat$plot))
length(unique(dimnames(dat.mat)))
length(unique(dimnames(dat.mat)[1]))
dim(dat.mat)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
table(dat.all$plot)
length(unique(dat.all$plot))
length(unique(dat.07$plot))
length(unique(dat.18$plot))
write.csv(dat.all, '../dat.all.csv', row.names = F, quote = F)
rm(list = ls())
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
tnrs_all <- data.frame(read.table('outputs/complete_tnrs_list.txt', sep = '\t', as.is = T))
tnrs_all <- data.frame(read.table('outputs/complete_tnrs_list.txt', sep = '\t'))
tnrs_all <- data.frame(read.delim('outputs/complete_tnrs_list.txt', sep = '\t'))
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.txt', as.is =T))
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
dat.all$accepted_name <- tnrs_all$Accepted_name[match(dat.all$species, tnrs_all$Name_submitted)]
View(dat.all)
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
rm(list = ls())
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
names(native_id) <- c('Accepted_name', 'native')
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species_data/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)] # broooo need to re run the translation key with the new data from summer!! 12/6
missing_natives <- unique(dat.all$accepted_name[which(is.na(dat.all$nativestatus))]) # I have this number trimmed down to 86!!
# read back in the missing natives file
revised_missing_invasives <- read.csv('data/species_data/missing_natives - missing_natives.csv')[,2:3] # 11/4 7:32 PM is wondering what this file is??
names(revised_missing_invasives) <- c('Accepted_name', 'native')
# append the missing names/statuses to native_id
native_id <- rbind(native_id, revised_missing_invasives)
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)]
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
rm(list = ls())
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
View(dat.all)
table(dat.all)
table(dat.all$plot)
# read back in the missing natives file
revised_missing_invasives <- read.csv('data/species_data/missing_natives - missing_natives.csv') # key from Dr. Hipp with his comments
View(revised_missing_invasives)
View(revised_missing_invasives)
View(native_id)
View(revised_missing_invasives)
revised_missing_invasives <- revised_missing_invasives[,c('x', 'native.exotic.invasive')]
# append the missing names/statuses to native_id
native_id <- rbind(native_id, revised_missing_invasives)
names(revised_missing_invasives) <- c('Accepted_name', 'native')
# append the missing names/statuses to native_id
native_id <- rbind(native_id, revised_missing_invasives)
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)]
table(dat.all$plot)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
table(dat.all$plot)
dat.all <- read.csv('data/dat.all.csv')
View(dat.all)
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
table(dat.all$plot)
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
table(dat.all$plot)
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
table(dat.all$plot)
names(native_id) <- c('Accepted_name', 'native')
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species_data/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
table(dat.all$plot)
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)] # broooo need to re run the translation key with the new data from summer!! 12/6
table(dat.all$plot)
missing_natives <- unique(dat.all$accepted_name[which(is.na(dat.all$nativestatus))]) # I have this number trimmed down to 86!!
table(dat.all$plot)
# read back in the missing natives file
revised_missing_invasives <- read.csv('data/species_data/missing_natives - missing_natives.csv') # key from Dr. Hipp with his comments
table(dat.all$plot)
revised_missing_invasives <- revised_missing_invasives[,c('x', 'native.exotic.invasive')]
table(dat.all$plot)
names(revised_missing_invasives) <- c('Accepted_name', 'native')
table(dat.all$plot)
table(dat.all$plot)
# append the missing names/statuses to native_id
native_id <- rbind(native_id, revised_missing_invasives)
table(dat.all$plot)
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)]
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/06.cover.R')
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
source('~/Documents/GitHub/east_woods_work/scripts/06.cover.R')
source('~/Documents/GitHub/east_woods_work/scripts/09.envt_data.R')
table(dat.all$plot)
setwd('~/Documents/GitHub/east_woods_work/')
liz_data <- read.csv('data/liz_data.csv')
dat.all <- read.csv('data/dat.all.csv')
dat.07 <- dat.all[which(dat.all$year == '2007'),]
dat.18 <- dat.all[which(dat.all$year == '2018'),]
library(ape)
#source('~/Documents/morton arb/east_woods_phylogeny/SCRIPTS/17.tree_generation.R')
# probably want to just read in the tree instead of sourcing it every time
tr.ewv4 <- read.tree('~/Documents/GitHub/east_woods_work/outputs/tr.ewv4')
dat.07 <- dat.07[which(dat.07$plot %in% liz_data$plots),]
dat.18 <- dat.18[which(dat.18$plot %in% liz_data$plots),]
liz_data <- liz_data[which(liz_data$plots %in% dat.07$plot),] # this shouldnt get rid of anything but im
dat <- dat.07[which(dat.07$datset == 'H'),]
dat <- rbind(dat, dat.07[which(dat.07$datset == 'S'),])
vects <- list(plots = unique(sort(dat$plot)),
sp = unique(sort(dat$species)),
accname = unique(sort(dat$accepted_name)))
vects$accname <- vects$accname[which(!vects$accname %in% c('', ' ', '0'))]
dat.mat <- matrix(0, length(vects$plots), length(vects$accname),
dimnames = list(vects$plots, vects$accname))
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
print(dat[i, 'accepted_name'])
#dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
table(dat.all$plot)
setwd('~/Documents/GitHub/east_woods_work/')
liz_data <- read.csv('data/liz_data.csv')
setwd('~/Documents/GitHub/east_woods_work/')
liz_data <- read.csv('data/liz_data.csv')
dat.all <- read.csv('data/dat.all.csv')
table(dat.all$plot)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
dat.all$accepted_name <- tnrs_all$Accepted_name[match(dat.all$species, tnrs_all$Name_submitted)]
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
rm(list = ls())
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
#take these species lists and run through http://tnrs.iplantcollaborative.org/TNRSapp.html
#TNRS OUTPUT: complete_tnrs_list.csv
###################################################################################################
# make the translation key with original species name in one column and
# accepted species name in another
# LAST UPDATED TRANSLATION KEY: 11/3
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
###################################################################################################
#append the accepted name to each of the spp pool dataframes
dat.all$accepted_name <- tnrs_all$Accepted_name[match(dat.all$species, tnrs_all$Name_submitted)]
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
r
table(dat.all$plot)
rm(list = ls())
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
names(native_id) <- c('Accepted_name', 'native')
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species_data/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)] # broooo need to re run the translation key with the new data from summer!! 12/6
missing_natives <- unique(dat.all$accepted_name[which(is.na(dat.all$nativestatus))]) # I have this number trimmed down to 86!!
# read back in the missing natives file
revised_missing_invasives <- read.csv('data/species_data/missing_natives - missing_natives.csv') # key from Dr. Hipp with his comments
revised_missing_invasives <- revised_missing_invasives[,c('x', 'native.exotic.invasive')]
names(revised_missing_invasives) <- c('Accepted_name', 'native')
# append the missing names/statuses to native_id
native_id <- rbind(native_id, revised_missing_invasives)
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)]
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
rm(list = ls())
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
names(native_id) <- c('Accepted_name', 'native')
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species_data/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)] # broooo need to re run the translation key with the new data from summer!! 12/6
missing_natives <- unique(dat.all$accepted_name[which(is.na(dat.all$nativestatus))]) # I have this number trimmed down to 86!!
# read back in the missing natives file
revised_missing_invasives <- read.csv('data/species_data/missing_natives - missing_natives.csv') # key from Dr. Hipp with his comments
revised_missing_invasives <- revised_missing_invasives[,c('x', 'native.exotic.invasive')]
names(revised_missing_invasives) <- c('Accepted_name', 'native')
# append the missing names/statuses to native_id
native_id <- rbind(native_id, revised_missing_invasives)
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)]
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
table(dat.all$plot)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
table(dat.all$plot)
length(unique(dat.all$plot))
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
table(dat.all$plot)
length(unique(dat.all$plot))
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
table(dat.all$plot)
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
length(unique(dat.all$plot))
dat.all$plot
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
table(dat.all$plot)
table(dat.all.sorted)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
table(dat.all$plot)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
table(dat.all$plot)
dat.all <- read.csv('data/dat.all.csv')
dat.all <- read.csv('../dat.all.csv')
table(dat.all$plot)
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
table(dat.all$plot)
dat.all <- dat.all[which(dat.all$plot == '2018'),]
write.csv(dat.all, 'data/dat.all.csv', row.names = F, quote = F)
table(dat.all$plot)
#MAKE NEW TNRS TRANSLATION KEY TO SEND TO DR. HIPP
# using the same method as in the summer, take the species list from 2007 + 2018 pool
# and sumbit to TNRS for cleaned names list
# OUTPUT: fall_translation_key.csv, 2007_spp_pool.csv, 2018_spp_pool.csv,
# 2007_2018_spp_pool.csv (will just append a column with accepted name to spp pool)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
dat.all$accepted_name <- tnrs_all$Accepted_name[match(dat.all$species, tnrs_all$Name_submitted)]
dat.all <- dat.all[which(dat.all$plot != '2018'),]
table(dat.all$plot)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
library(magrittr)
dat.all.sorted <- sapply(dat.all$species, function(x) x) %>%
unlist %>%
trimws %>%
unique %>%
sort
dat.all.sorted <- data.frame(dat.all.sorted)
write.csv(dat.all.sorted, 'outputs/complete_spp_list.csv')
#take these species lists and run through http://tnrs.iplantcollaborative.org/TNRSapp.html
#TNRS OUTPUT: complete_tnrs_list.csv
###################################################################################################
# make the translation key with original species name in one column and
# accepted species name in another
# LAST UPDATED TRANSLATION KEY: 11/3
tnrs_all <- data.frame(read.csv('outputs/complete_tnrs_list.csv', as.is =T))
###################################################################################################
#append the accepted name to each of the spp pool dataframes
dat.all$accepted_name <- tnrs_all$Accepted_name[match(dat.all$species, tnrs_all$Name_submitted)]
View(dat.all)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
table(dat.all$plot)
View(dat.all)
length(unique(dat.all$plot))
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
names(native_id) <- c('Accepted_name', 'native')
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species_data/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
dat.all$nativestatus <- native_id$native[match(dat.all$accepted_name, native_id$Accepted_name)] # broooo need to re run the translation key with the new data from summer!! 12/6
View(native_id)
View(native_id)
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
match(dat.all$accepted_name, native_id$Accepted_name)
setwd('~/Documents/GitHub/east_woods_work/')
dat.all <- read.csv('data/dat.all.csv')
usda_spp_dat <- read.csv('data/species_data/usda_spp_info.csv')
native_id <- data.frame(usda_spp_dat[,c('Scientific.Name', 'Native.Status')])
names(native_id) <- c('Accepted_name', 'native')
native_id$native <- 'n'
invasive_tnrs <- read.csv('data/species_data/invasives_tnrs.csv')
invasive_tnrs$native <- 'i'
native_id <- rbind(native_id, invasive_tnrs[,c('Accepted_name', 'native')])
match(dat.all$accepted_name, native_id$Accepted_name)
source('~/Documents/GitHub/east_woods_work/scripts/01.combine_spp_pools.R')
source('~/Documents/GitHub/east_woods_work/scripts/02.falltranslationkey.R')
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
table(dat.all$plot)
length(unique(dat.all$plot))
source('~/Documents/GitHub/east_woods_work/scripts/04.natives.R')
setwd("~/Documents/GitHub/east_woods_work/")
source('https://raw.githubusercontent.com/andrew-hipp/morton/master/R/makeMat.R')
source('https://raw.githubusercontent.com/andrew-hipp/morton/master/R/weldTaxa.R')
source('https://raw.githubusercontent.com/andrew-hipp/morton/master/R/label.elements.R')
dat.all <- read.csv('data/dat.all.csv')
if(!exists('tr.zanne')) tr.zanne <- read.tree('phylo.zanne.tre')
if(!exists('tr.zanne')) tr.zanne <- read.tree('data/phylo.zanne.tre')
dat.all$accepted_name <- gsub('[ ,.] ', '_', dat.all$accepted_name)
tre.ewv1 <- make.matAndTree(tr.zanne, dat.all, name.column = 'accepted_name')
write.csv(tre.ewv1$matrix.renaming, 'outputs/tree_taxa_4.csv')
tre.ewv2 <- weldTaxa(tre.ewv1)
tre.ewv2.pruned <- drop.tip(tre.ewv2, which(!tre.ewv2$tip.label %in% row.names(tre.ewv1$matrix.renaming)))
write.tree(tre.ewv2.pruned, 'outputs/tr.ewv4')
setwd('~/Documents/GitHub/east_woods_work/')
liz_data <- read.csv('data/liz_data.csv')
dat.all <- read.csv('data/dat.all.csv')
dat.07 <- dat.all[which(dat.all$year == '2007'),]
dat.18 <- dat.all[which(dat.all$year == '2018'),]
library(ape)
#source('~/Documents/morton arb/east_woods_phylogeny/SCRIPTS/17.tree_generation.R')
# probably want to just read in the tree instead of sourcing it every time
tr.ewv4 <- read.tree('~/Documents/GitHub/east_woods_work/outputs/tr.ewv4')
dat.07 <- dat.07[which(dat.07$plot %in% liz_data$plots),]
dat.18 <- dat.18[which(dat.18$plot %in% liz_data$plots),]
liz_data <- liz_data[which(liz_data$plots %in% dat.07$plot),] # this shouldnt get rid of anything but im
dat <- dat.07[which(dat.07$datset == 'H'),]
dat <- rbind(dat, dat.07[which(dat.07$datset == 'S'),])
vects <- list(plots = unique(sort(dat$plot)),
sp = unique(sort(dat$species)),
accname = unique(sort(dat$accepted_name)))
vects$accname <- vects$accname[which(!vects$accname %in% c('', ' ', '0'))]
dat.mat <- matrix(0, length(vects$plots), length(vects$accname),
dimnames = list(vects$plots, vects$accname))
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
dim(dat)
dim(dat.mat)
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
dat.mat[dat[i, 'plot'], dat[i, 'species']] <- 1
}
for(i in 1:dim(dat)[1]){
if(!dat[i, 'accepted_name'] %in% dimnames(dat.mat)[[2]]) next
dat.mat[dat[i, 'plot'], dat[i, 'accepted_name']] <- 1
}
